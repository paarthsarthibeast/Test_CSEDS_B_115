<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Random Joke Generator</title>
    <link href="style.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>

<body>
    <div class="container">
        <h2>Random Joke Generator</h2>
        <div class="box">
            <p><b>Press the Button for a Joke.</b></p>
            <span>Character Count : </span>
        </div>
        <div class="buttons">
            <button class="b1">Get Joke</button>
            <button class="b2">Clear Joke</button>
        </div>
    </div>

    <script>
        // Define the API URL
        const Api_url = 'https://v2.jokeapi.dev/joke/Any';

        // Function to fetch a random joke
        async function getJoke() {
            try {
                const response = await fetch(Api_url);
                const data = await response.json();

                // Check if the joke is a programming joke or general
                if (data.type === 'single') {
                    return data.joke; // For "single-line" jokes
                } else {
                    return `${data.setup} - ${data.delivery}`; // For "two-part" jokes
                }
            } catch (error) {
                console.error("Error fetching joke:", error);
                return "Sorry, couldn't fetch a joke at the moment!";
            }
        }

        // Function to display the joke on the page
        async function addelement() {
            const jokeContainer = document.querySelector('.box');

            // Get a joke
            const joke = await getJoke();

            // Display the joke in the container
            jokeContainer.innerHTML = `
                <p><b>${joke}</b></p>
                <span>${joke}</span>
            `;

            // Also update the character count
            const jokeLength = joke.length;
            const charCount = document.querySelector('.box span');
            charCount.innerHTML = `Character Count: ${jokeLength}`;
        }

        // Function to clear the joke
        function clearJoke() {
            const jokeContainer = document.querySelector('.box');
            jokeContainer.innerHTML = `<p><b>Press the Button for a Joke.</b></p><span>Character Count: </span>`;
        }

        // Add event listeners to the buttons
        document.querySelector('.b1').addEventListener('click', addelement);
        document.querySelector('.b2').addEventListener('click', clearJoke);
    </script>
</body>

</html>